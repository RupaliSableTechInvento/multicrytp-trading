{"version":3,"sources":["../../src/controller/tradeController.js"],"names":["moment","require","mongoose","tradeController","getAll","req","res","next","find","err","trade","json","isError","data","getPostTrade_ByUser","decoded","verify","headers","App_key","_id","getPriceEquation","getQuickByCryptocurrency","console","log","request","query","perpage","pagination","page","skip","amount","parseInt","cryptoCurrency","location","tradeMethod","traderType","payment_method","currency","$lte","$gte","$lt","$gt","count","pages","total","sort","field","meta","limit","getByCurrencyLoc","subQuery","getTrade","user","getOne","body","params","findById","id","create","first_name","userObj","firstName","tradeInfo","findOneAndUpdate","user_id","UpdateUser","update","new","delete","remove","ok","Types","ObjectId"],"mappings":"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","file":"tradeController.js","sourcesContent":["import postatrade from '../models/postatrade'\r\nimport tradeMoreInfo from '../models/tradeMoreInfo'\r\nimport usersModel from '../models/usersModel'\r\nimport async from 'async'\r\nvar moment = require('moment');\r\nvar mongoose = require('mongoose');\r\nimport jwt from 'jsonwebtoken';\r\nimport env from \"../env\";\r\n\r\n// var request = require('request');\r\n\r\nconst tradeController = {\r\n\r\n  getAll: async(req, res, next) => {\r\n    postatrade.find({}, (err, trade) => {\r\n      if (err) return res.json({\r\n        isError: true,\r\n        data: err\r\n      });\r\n      res.json({\r\n        isError: false,\r\n        data: trade\r\n      });\r\n    });\r\n  },\r\n\r\n  getPostTrade_ByUser: (req, res, next) => {\r\n    var decoded = jwt.verify(req.headers['authorization'], env.App_key);\r\n    var _id = decoded._id;\r\n\r\n    postatrade.find({ \"user\": _id }, (err, trade) => {\r\n      if (err) return res.json({\r\n        isError: true,\r\n        data: err\r\n      });\r\n      res.json({\r\n        isError: false,\r\n        data: trade\r\n      });\r\n    });\r\n  },\r\n\r\n  getPriceEquation: (req, res, next) => {\r\n    // console.log(\"Req for getPriceEquation=>\", req.query);\r\n    // var dataObj = req.query.dataObj;\r\n    // var much = 100;\r\n    // var url = 'http://www.xe.com/currencyconverter/convert/?Amount=' + much + '&From=' + dataObj.from + '&To=' + dataObj.to;\r\n\r\n    // console.log(\"url==>\", url);\r\n    // request(url, function(err, resp, body) {\r\n    //   // body = JSON.parse(body);\r\n    //   console.log(\" response for getPriceEquation==>\", body)\r\n    //     // logic used to compare search results with the input from user\r\n    //   if (!body.query.results.RDF.item) {\r\n    //     craig = \"No results found. Try again.\";\r\n    //   } else {\r\n    //     craig = body.query.results.RDF.item[0]['about'];\r\n    //     console.log(\"in else==>craig\", craig);\r\n    //   }\r\n    // });\r\n    // $.ajax({\r\n    //   url: 'http://www.xe.com/currencyconverter/convert/?Amount=' + much + '&From=' + dataObj.from + '&To=' + dataObj.to,\r\n    //   // url: 'https://api.cryptonator.com/api/ticker/' + dataObj.from + '-' + dataObj.to,\r\n    //   type: \"get\",\r\n    //   success: function(successData) {\r\n    //     console.log(\"sucesss data in price equation in api.js=> \", successData);\r\n    //     // resolve(successData)\r\n    //   },\r\n    //   error: function(err) {\r\n    //     alert(err);\r\n    //   }\r\n    // })\r\n\r\n  },\r\n\r\n  getQuickByCryptocurrency: async(req, res, next) => {\r\n    console.log(\"quickBUY/SELL\");\r\n    var request = req.query.query;\r\n    var perpage = req.query.pagination.perpage;\r\n    var page = req.query.pagination.page;\r\n    var skip = 0;\r\n    if (page > 1) {\r\n      skip = perpage * (page - 1);\r\n      console.log(\"perpage page skip=>\", perpage, page, skip);\r\n    }\r\n    var amount = parseInt(req.query.query.amount);\r\n    var cryptoCurrency = req.query.query.cryptoCurrency;\r\n    var location = req.query.query.location;\r\n    var tradeMethod = req.query.query.tradeMethod;\r\n    var traderType = req.query.query.traderType;\r\n    var payment_method = req.query.query.payment_method;\r\n    var currency = req.query.query.currency;\r\n    // 'more_information.currency': currency,\r\n    console.log(\"getQuickByCryptocurrency=>>\", req.query.query);\r\n\r\n    postatrade.find({\r\n      cryptoCurrency: cryptoCurrency,\r\n      location: location,\r\n      tradeMethod: tradeMethod,\r\n      traderType: traderType,\r\n      'more_information.min_trans_limit': {\r\n        $lte: amount\r\n      },\r\n      'more_information.max_trans_limit': {\r\n        $gte: amount\r\n      },\r\n      'more_information.currency': currency,\r\n      payment_method: payment_method\r\n    }, async(err, trade) => {\r\n      if (err) return res.json({\r\n        isError: true,\r\n        data: err\r\n      });\r\n      res.json({\r\n        isError: false,\r\n        meta: {\r\n          page: req.query.pagination.page,\r\n          pages: (await postatrade.find({\r\n            cryptoCurrency: cryptoCurrency,\r\n            location: location,\r\n            tradeMethod: tradeMethod,\r\n            traderType: traderType,\r\n            'more_information.min_trans_limit': {\r\n              $lt: amount\r\n            },\r\n            'more_information.max_trans_limit': {\r\n              $gt: amount\r\n            },\r\n            'more_information.currency': currency,\r\n            'payment_method': payment_method\r\n\r\n          }).count() / (10)),\r\n          perpage: req.query.pagination.perpage,\r\n          total: await postatrade.find({\r\n            cryptoCurrency: cryptoCurrency,\r\n            location: location,\r\n            'more_information.min_trans_limit': {\r\n              $lt: amount\r\n            },\r\n            'more_information.max_trans_limit': {\r\n              $gt: amount\r\n            },\r\n            tradeMethod: tradeMethod,\r\n            traderType: traderType,\r\n            'more_information.currency': currency,\r\n\r\n            // payment_method: payment_method\r\n\r\n          }).count(),\r\n          sort: \"asc\",\r\n          field: \"_id\",\r\n        },\r\n        data: trade,\r\n      }, )\r\n\r\n    }).limit(parseInt(req.query.pagination.perpage) || 10).skip(skip || '')\r\n  },\r\n\r\n  getByCurrencyLoc: async(req, res, next) => {\r\n    var perpage = req.query.pagination.perpage;\r\n    var query = {};\r\n    var page = req.query.pagination.page;\r\n    var skip = 0;\r\n    if (page > 1) {\r\n      skip = perpage * (page - 1);\r\n      console.log(\"perpage page skip=>\", perpage, page, skip);\r\n    }\r\n    var cryptoCurrency = req.query.query.subQuery.cryptoCurrency;\r\n    var location = req.query.query.subQuery.location;\r\n    var tradeMethod = req.query.query.tradeMethod;\r\n    var traderType = req.query.query.traderType;\r\n    // console.log(cryptoCurrency, location, tradeMethod, traderType);\r\n    if (location) {\r\n      query = {\r\n        cryptoCurrency: cryptoCurrency,\r\n        location: location,\r\n        tradeMethod: tradeMethod,\r\n        traderType: traderType,\r\n      }\r\n    } else {\r\n      query = {\r\n        cryptoCurrency: cryptoCurrency,\r\n        tradeMethod: tradeMethod,\r\n        traderType: traderType,\r\n      }\r\n    }\r\n\r\n    postatrade.find(\r\n\r\n      //   cryptoCurrency: cryptoCurrency,\r\n      //   // location: location,\r\n      //   tradeMethod: tradeMethod,\r\n      //   traderType: traderType,\r\n      // }\r\n      query, async(err, trade) => {\r\n        if (err) return res.json({\r\n          isError: true,\r\n          data: err\r\n        });\r\n        else {\r\n          // console.log(\"tradeByCurrencyLoc is called in server and data is==>\", trade, typeof trade);\r\n\r\n          res.json({\r\n            isError: false,\r\n            meta: {\r\n              page: req.query.pagination.page,\r\n              pages: (await postatrade.find({\r\n                cryptoCurrency: cryptoCurrency,\r\n                location: location,\r\n                tradeMethod: tradeMethod,\r\n                traderType: traderType,\r\n              }).count() / (10)),\r\n              perpage: req.query.pagination.perpage,\r\n              total: await postatrade.find({\r\n                cryptoCurrency: cryptoCurrency,\r\n                location: location,\r\n                tradeMethod: tradeMethod,\r\n                traderType: traderType,\r\n              }).count(),\r\n              sort: \"asc\",\r\n              field: \"_id\",\r\n            },\r\n            data: trade,\r\n          }, )\r\n        }\r\n\r\n\r\n      }).limit(parseInt(req.query.pagination.perpage) || 10).skip(skip || '')\r\n  },\r\n\r\n\r\n\r\n  getTrade: async(req, res, next) => {\r\n    var request = req.query.query;\r\n    var perpage = req.query.pagination.perpage;\r\n    var page = req.query.pagination.page;\r\n    var skip = 0;\r\n    if (page > 1) {\r\n      skip = perpage * (page - 1);\r\n      console.log(\"perpage page skip=>\", perpage, page, skip);\r\n\r\n    }\r\n    var user = req.query.query.user;\r\n    // var cryptoCurrency = req.query.query.cryptoCurrency;\r\n    // var location = req.query.query.location;\r\n    // var tradeMethod = req.query.query.tradeMethod;\r\n    // var traderType = req.query.query.traderType;\r\n\r\n    postatrade.find({\r\n      user: user\r\n\r\n    }, async(err, trade) => {\r\n      if (err) return res.json({\r\n        isError: true,\r\n        data: err\r\n      });\r\n      res.json({\r\n        isError: false,\r\n        meta: {\r\n          page: req.query.pagination.page,\r\n          pages: (await postatrade.find({\r\n            user: user\r\n\r\n          }).count() / (10)),\r\n          perpage: req.query.pagination.perpage,\r\n          total: await postatrade.find({\r\n            user: user\r\n\r\n          }).count(),\r\n          sort: \"asc\",\r\n          field: \"_id\",\r\n        },\r\n        data: trade,\r\n      }, )\r\n\r\n    }).limit(parseInt(req.query.pagination.perpage) || 10).skip(skip || '')\r\n  },\r\n\r\n\r\n  getOne: (req, res, next) => {\r\n    console.log(\"req=> for get One tradeController\", req.body, req.params, req.query);\r\n    postatrade.findById(req.query.id, (err, trade) => {\r\n      if (err) {\r\n        res.json({\r\n          isError: true,\r\n          data: err\r\n        });\r\n      }\r\n      res.json({\r\n        isError: false,\r\n        data: trade\r\n      });\r\n    });\r\n  },\r\n\r\n  create: async(req, res, next) => {\r\n\r\n    var params = req.body;\r\n\r\n    var userObj = await usersModel.find({\r\n      '_id': req.body.user\r\n    }, {\r\n      _id: 0,\r\n      first_name: 1\r\n    });\r\n\r\n    /*  params.firstName = await usersModel.findOne({ '_id': req.body.user }, { _id: 0, first_name: 1 }, (err, user) => {\r\n       if (err) {\r\n         res.json({ isError: true, data: err });\r\n       } else { res.json({ isError: false, data: user }); }\r\n     }); */\r\n    params.firstName = userObj[0].first_name;\r\n    console.log(\"params in posrt trade=>>\", params);\r\n\r\n    postatrade.create(params, function(err, trade) {\r\n      if (err) return res.json({\r\n        isError: true,\r\n        data: err\r\n      });\r\n      else {\r\n        tradeMoreInfo.create({\r\n          'trade_id': trade._id,\r\n          'user_id': trade.user\r\n        }, function(err, tradeInfo) {\r\n          if (err) return res.json({\r\n            isError: true,\r\n            data: err\r\n          });\r\n          else {\r\n            usersModel.findOneAndUpdate({\r\n              '_id': tradeInfo.user_id\r\n            }, {\r\n              \"trade_info\": tradeInfo._id\r\n            }, function(err, UpdateUser) {\r\n              if (err) return res.json({\r\n                isError: true,\r\n                data: err\r\n              });\r\n              res.json({\r\n                isError: false,\r\n                data: UpdateUser\r\n              })\r\n            })\r\n          }\r\n        })\r\n      }\r\n    })\r\n  },\r\n\r\n  update: (req, res, next) => {\r\n    postatrade.findOneAndUpdate(req.params.id, req.body, {\r\n      new: true\r\n    }, (err, trade) => {\r\n      if (err) return res.json({\r\n        isError: true,\r\n        data: err\r\n      });\r\n      res.json({\r\n        isError: false,\r\n        data: trade\r\n      })\r\n    });\r\n  },\r\n\r\n  delete: (req, res, next) => {\r\n    postatrade.remove({\r\n      _id: req.params.id\r\n    }, (err, ok) => {\r\n      if (err) return res.json({\r\n        isError: true,\r\n        data: err\r\n      });\r\n    });\r\n    res.json({\r\n      isError: false,\r\n      data: true\r\n    })\r\n  },\r\n\r\n  update: (req, res, next) => {\r\n    var id = mongoose.Types.ObjectId(req.body.id);\r\n    postatrade.findOneAndUpdate({\r\n      '_id': id\r\n    }, req.body, {\r\n      new: true\r\n    }, (err, user) => {\r\n      if (err) return res.json({\r\n        isError: true,\r\n        data: err\r\n      });\r\n      res.json({\r\n        isError: false,\r\n        data: user\r\n      })\r\n    });\r\n  },\r\n};\r\n\r\nexport default tradeController;"]}